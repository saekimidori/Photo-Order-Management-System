<%- include('partials/header') -%>


<p><a href="/workspace" class="button">Return to Workspace</a></p>

<h2>Customer Details</h2>
<form action="/customer/update/<%=customer._id%>" method="POST">
    <p>
        <label for="lastName">Last Name: </label>
        <input type="text" name="updatedLastName" value="<%= customer.lastName %>"> <label for="updatedFirstName">First Name: </label>
        <input type="text" name="updatedFirstName" value="<%= customer.firstName %>">
    </p>
    <p>
        <label for="phone">Phone Number: </label>
        <input type="number" name="updatedPhone" value="<%= customer.phone %>">
    </p>
    <p>
        <label for="email">E-mail: </label>
        <input type="text" name="updatedEmail" value="<%= customer.email %>">
    </p>
    <p>
        <label for="address">Address: </label>
        <input type="text" name="updatedAddress" value="<%= customer.address %>">
    </p>
    <button type="submit">Submit</button> <a href="/customer/<%= customer._id %>" class="button">Cancel</a>
</form>

<h2>Order History</h2>
<% if (!order.length) { %>
    <p>No orders found.</p>
<% } else { %>
<table>
    <thead>
        <tr>
            <th>#</th>
            <th>Envelope #</th>
            <th>Order ID</th>
            <th>Envelope Details</th>
            <th>Status</th>
            <th>Promise Time</th>
            <th>Exceptions</th>
            <th>Order Date</th>
            <th>Finish Date</th>
            <th>Sold Date</th>
        </tr>
    </thead>
    <tbody>
        <% let num = 1 %>
        <% order.forEach(order => { %>
            <tr>
                <td><%= num %></td>
                <td><a href="/order/<%= order._id %>"><%= order.envelopeNum %></a></td>
                <td><%= order.orderId %></td>
                <td><%= order.details %></td>
                <td><%= order.status %></td>
                <td><%= order.promiseTime %></td>
                <td></td>
                <td><%= order.orderTime %></td>
                <td><%= order.completed %></td>
                <td><%= order.sold %></td>
            </tr>
            <% num++ %>
        <% }) %>
    </tbody>
</table>
<% } %>


<%- include('partials/footer') -%>